#!/usr/bin/env ruby

require 'optparse'
require 'methadone'
require 'json'
require 'aws-sdk'
require 'csv'
require 'kingoftheroad.rb'
require 'kingoftheroad/credential'
require 'kingoftheroad/route53'
require 'byebug'

class App
  include Methadone::Main
  include Methadone::CLILogging

  main do |zone_file, credential_file|
    credential = Credential.new(credential_file)

    puts Route53.get_hosted_zone_id('redvector.com.', credential)
  end


  
version Kingoftheroad::VERSION
  
  arg :zone_file, "A column delimited zone file with DNS records exported for a domain"
  arg :credential_file, "An AWS-specific csv file with an access key and secret"

  use_log_level_option :toggle_debug_on_signal => 'USR1'

  go!
end
